<!DOCTYPE html>
<html>
<script>
	VoltageInputExample = {}

	var $KEY_phid;
	var $KEY_errOn = false;

	VoltageInputExample.setup = function(phid) {

		$KEY_phid = phid;
		phid.onVoltageChange = voltChange;
		phid.onSensorChange = svChange;
		phid.onError = $KEY_onError;
		phid.onPropertyChange = $KEY_propChange;

		$('#$KEY_di').val(phid.getDataInterval());
		$('#$KEY_ct').val(phid.getVoltageChangeTrigger());

		if(phid.channel.name == "Supply Voltage") {

			$('#$KEY_rangeLabel').hide();
			$('#$KEY_rangeCombo').hide();
			$('#$KEY_sensorLabel').hide();
			$('#$KEY_sensorCombo').hide();
			$('#$KEY_sensorValue').hide();
			$('#$KEY_unit').hide();
			$("#$KEY_di").attr('disabled', 'disabled');
			$("#$KEY_diButton").attr('disabled', 'disabled');
			$("#$KEY_ct").attr('disabled', 'disabled');
			$("#$KEY_ctButton").attr('disabled', 'disabled');
		}

		switch(phid.getDeviceID()) {
			case phidget22.DeviceID.PN_VCP1000:
				$('#$KEY_rangeCombo').val(phid.getVoltageRange());
				$("#$KEY_rangeCombo option[value='1']").remove();
				$("#$KEY_rangeCombo option[value='2']").remove();
				$("#$KEY_rangeCombo option[value='3']").remove();
				$("#$KEY_rangeCombo option[value='5']").remove();
				$("#$KEY_rangeCombo option[value='6']").remove();
				$("#$KEY_rangeCombo option[value='7']").remove();
				$("#$KEY_rangeCombo option[value='8']").remove();
				$("#$KEY_rangeCombo option[value='9']").remove();
				$("#$KEY_rangeCombo option[value='11']").remove();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				break;
			case phidget22.DeviceID.PN_VCP1001:
				$('#$KEY_rangeCombo').val(phid.getVoltageRange());
				$("#$KEY_rangeCombo option[value='1']").remove();
				$("#$KEY_rangeCombo option[value='2']").remove();
				$("#$KEY_rangeCombo option[value='3']").remove();
				$("#$KEY_rangeCombo option[value='4']").remove();
				$("#$KEY_rangeCombo option[value='5']").remove();
				$("#$KEY_rangeCombo option[value='6']").remove();
				$("#$KEY_rangeCombo option[value='7']").remove();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				break;
			case phidget22.DeviceID.PN_VCP1002:
				$('#$KEY_rangeCombo').val(phid.getVoltageRange());
				$("#$KEY_rangeCombo option[value='4']").remove();
				$("#$KEY_rangeCombo option[value='5']").remove();
				$("#$KEY_rangeCombo option[value='7']").remove();
				$("#$KEY_rangeCombo option[value='8']").remove();
				$("#$KEY_rangeCombo option[value='9']").remove();
				$("#$KEY_rangeCombo option[value='10']").remove();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				break;
			case phidget22.DeviceID.PN_1058:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_unit').hide();
				break;
			case phidget22.DeviceID.PN_ADP1000:
				$('#$KEY_rangeCombo').val(phid.getVoltageRange());
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				$("#$KEY_sensorCombo option[value='0']").remove();
				$("#$KEY_sensorCombo option[value='10580']").remove();
				$("#$KEY_sensorCombo option[value='11140']").remove();
				$("#$KEY_sensorCombo option[value='11170']").remove();
				$("#$KEY_sensorCombo option[value='11230']").remove();
				$("#$KEY_sensorCombo option[value='11270']").remove();
				$("#$KEY_sensorCombo option[value='11301']").remove();
				$("#$KEY_sensorCombo option[value='11302']").remove();
				$("#$KEY_sensorCombo option[value='11320']").remove();
				$("#$KEY_sensorCombo option[value='11330']").remove();
				$("#$KEY_sensorCombo option[value='11350']").remove();
				$("#$KEY_sensorCombo option[value='11420']").remove();
				$("#$KEY_sensorCombo option[value='11430']").remove();
				$("#$KEY_sensorCombo option[value='35000']").remove();
				$("#$KEY_sensorCombo option[value='35010']").remove();
				$("#$KEY_sensorCombo option[value='35020']").remove();
				$("#$KEY_sensorCombo option[value='35030']").remove();
				$("#$KEY_sensorCombo option[value='35070']").remove();
				$("#$KEY_sensorCombo option[value='35080']").remove();
				$("#$KEY_sensorCombo option[value='35090']").remove();
				$("#$KEY_sensorCombo option[value='35100']").remove();
				$("#$KEY_sensorCombo option[value='35110']").remove();
				$("#$KEY_sensorCombo option[value='35120']").remove();
				$("#$KEY_sensorCombo option[value='35130']").remove();
				$("#$KEY_sensorCombo option[value='35140']").remove();
				$("#$KEY_sensorCombo option[value='35150']").remove();
				$("#$KEY_sensorCombo option[value='35160']").remove();
				$("#$KEY_sensorCombo option[value='35170']").remove();
				$("#$KEY_sensorCombo option[value='35180']").remove();
				$("#$KEY_sensorCombo option[value='35190']").remove();
				$("#$KEY_sensorCombo option[value='35840']").remove();
				$("#$KEY_sensorCombo option[value='35850']").remove();
				$("#$KEY_sensorCombo option[value='35860']").remove();
				$("#$KEY_sensorCombo option[value='35870']").remove();
				$("#$KEY_sensorCombo option[value='35880']").remove();
				$("#$KEY_sensorCombo option[value='35890']").remove();
				$("#$KEY_rangeCombo option[value='1']").remove();
				$("#$KEY_rangeCombo option[value='2']").remove();
				$("#$KEY_rangeCombo option[value='3']").remove();
				$("#$KEY_rangeCombo option[value='4']").remove();
				$("#$KEY_rangeCombo option[value='6']").remove();
				$("#$KEY_rangeCombo option[value='8']").remove();
				$("#$KEY_rangeCombo option[value='9']").remove();
				$("#$KEY_rangeCombo option[value='10']").remove();
				$("#$KEY_rangeCombo option[value='11']").remove();
				break;
			case phidget22.DeviceID.PN_TMP1100:
			case phidget22.DeviceID.PN_TMP1101:
			case phidget22.DeviceID.PN_1048:
			case phidget22.DeviceID.PN_1051:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				break;
			case phidget22.DeviceID.VOLTAGE_INPUT_PORT:
			case phidget22.DeviceID.PN_1010_1013_1018_1019:
			case phidget22.DeviceID.PN_1011:
			case phidget22.DeviceID.PN_1202_1203:
			case phidget22.DeviceID.PN_DAQ1000:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				break;
			case phidget22.DeviceID.PN_DAQ1400:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				$('#$KEY_supplyLabel').removeAttr("hidden");
				$('#$KEY_supplyCombo').removeAttr("hidden");
				$('#$KEY_supplyCombo').val(phid.getPowerSupply());
				break;
			case phidget22.DeviceID.PN_1065:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				break;
			case phidget22.DeviceID.PN_SAF1000:
				$('#$KEY_rangeLabel').hide();
				$('#$KEY_rangeCombo').hide();
				$('#$KEY_sensorLabel').hide();
				$('#$KEY_sensorCombo').hide();
				$('#$KEY_sensorValue').hide();
				$('#$KEY_unit').hide();
				break;
			default:
				break;
		}
	}

	function $KEY_propChange(prop) {

		if(prop === 'DataInterval')
			$('#$KEY_di').val(this.getDataInterval());

		if(prop === 'VoltageChangeTrigger')
			$('#$KEY_ct').val(this.getVoltageChangeTrigger());

		if(prop === 'PowerSupply')
			$('#$KEY_supplyCombo').val(this.getPowerSupply());

		if(prop === 'SensorType')
			$('#$KEY_sensorCombo').val(this.getSensorType());

		if(prop === 'VoltageRange')
			$('#$KEY_rangeCombo').val(this.getVoltageRange());

	}

	function voltChange(voltage) {

		$('#$KEY_sat').hide();
		$('#$KEY_voltage').val(voltage);
	}

	function svChange(sensorValue, sensorUnit) {

		$('#$KEY_sat').hide();
		$('#$KEY_sensorValue').val(sensorValue);
		$('#$KEY_unit').text(sensorUnit.symbol);
	}

	function $KEY_sensorChange() {

		$KEY_phid.setSensorType($('#$KEY_sensorCombo').val());
	}

	function $KEY_supplyChange() {

		$KEY_phid.setPowerSupply($('#$KEY_supplyCombo').val());
	}

	function $KEY_rangeChange() {
		$("#$KEY_rangeCombo option[value='0']").remove();
		$KEY_phid.setVoltageRange($('#$KEY_rangeCombo').val());
	}

	function $KEY_onError(code, msg) {

		var d = new Date();
		var h = d.getHours();
		var m = d.getMinutes();
		var s = d.getSeconds();
		var ms = d.getMilliseconds();
		var tr = $('<tr>');

		tr.append('<td class="errTable"> ' + h + ':' + m + ':' + s + '.' + ms);
		tr.append('<td class="errTableRed"> 0x' + code.toString(16));
		tr.append('<td class="errTable">' + msg);
		$('#$KEY_errorTable').append(tr);
		$("#$KEY_errScroll").scrollTop($("#$KEY_errScroll")[0].scrollHeight);
		$("#$KEY_errorField").show();
	}

	function $KEY_errClear() {

		$('#$KEY_errorTable tbody').remove();
	}

	function setDI() {

		var di = parseInt($('#$KEY_di').val());
		if(di === NaN)
			return (false);

		if(di < $KEY_phid.getMinDataInterval()) {
			di = $KEY_phid.getMinDataInterval();
			$('#$KEY_di').val(di);
		}

		if(di > $KEY_phid.getMaxDataInterval()) {
			di = $KEY_phid.getMaxDataInterval();
			$('#$KEY_di').val(di);
		}

		$KEY_phid.setDataInterval(di);
		return (false);
	}

	function setCT() {

		var ct = parseFloat($('#$KEY_ct').val());
		if(ct === NaN)
			return (false);

		$KEY_phid.setVoltageChangeTrigger(ct);
		return (false);
	}

</script>
<body>
	<fieldset>
		<legend><label class='phidinfo'>Settings</label></legend>
		<table>
			<tr>
				<td><label class='phidinfo'>Data Interval</label></td>
				<td><input type='text' class='phidinfo' id='$KEY_di' size='7' value='30'></td>
				<td><input type='submit' size='9' class='phidinfo' id='$KEY_diButton' onclick='setDI()' value='Set'></td>
			</tr>
			<tr>
				<td><label class='phidinfo'>Change Trigger</label></td>
				<td><input type='text' class='phidinfo' id='$KEY_ct' size='7' value='0.0'></td>
				<td><input type='submit' id='$KEY_ctButton' size='9' class='phidinfo' onclick='setCT()' value='Set'></td>
			</tr>
			<tr>
				<td><label class='phidinfo' hidden="hidden" id='$KEY_supplyLabel'>Power Supply:</label></td>
				<td>
					<select class='phidinfo' hidden="hidden" onChange='$KEY_supplyChange()' id='$KEY_supplyCombo' value="0">
						<option value="1">OFF</option>
						<option value="2">12V</option>
						<option value="3">24V</option>
					</select>
				</td>
			</tr>
		</table>
	</fieldset>
	<fieldset>
		<legend><label class='phidinfo'>Data</label></legend>
		<table>
			<tr>
				<td><label>Voltage</label></td>
				<td><label id='$KEY_rangeLabel'>Range</label></td>
			</tr>
			<tr>
				<td><input readonly type='text' id='$KEY_voltage' value="0">V</td>
				<td>
					<select class='phidinfo' onChange='$KEY_rangeChange()' id='$KEY_rangeCombo'>
						<option value="1">10mV</option>
						<option value="2">40mV</option>
						<option value="3">200mV</option>
						<option value="4">312.5mV</option>
						<option value="5">400mV</option>
						<option value="6">1V</option>
						<option value="7">2V</option>
						<option value="8">5V</option>
						<option value="9">15V</option>
						<option value="10">40V</option>
						<option value="11">Auto</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>
					<label class='phidinfo' id='$KEY_sensorLabel'>Sensor Type:</label>
					<select class='phidinfo' onChange='$KEY_sensorChange()' id='$KEY_sensorCombo'>
						<option value="0">Generic voltage sensor</option>
						<option value="10580">1058 - pH Adapter</option>
						<option value="11140">1114 - Temperature Sensor</option>
						<option value="11170">1117 - Voltage Sensor</option>
						<option value="11230">1123 - Precision Voltage Sensor</option>
						<option value="11270">1127 - Precision Light Sensor</option>
						<option value="11301">1130 - pH Adapter</option>
						<option value="11302">1130 - ORP Adapter</option>
						<option value="11320">1132 - 4-20mA Adapter</option>
						<option value="11330">1133 - Sound Sensor</option>
						<option value="11350">1135 - Precision Voltage Sensor</option>
						<option value="11420">1142 - Light Sensor 1000 lux</option>
						<option value="11430">1143 - Light Sensor 70000 lux</option>
						<option value="35000">3500 - AC Current Sensor 10Amp</option>
						<option value="35010">3501 - AC Current Sensor 25Amp</option>
						<option value="35020">3502 - AC Current Sensor 50Amp</option>
						<option value="35030">3503 - AC Current Sensor 100Amp</option>
						<option value="35070">3507 - AC Voltage Sensor 0-250V (50Hz)</option>
						<option value="35080">3508 - AC Voltage Sensor 0-250V (60Hz)</option>
						<option value="35090">3509 - DC Voltage Sensor 0-200V</option>
						<option value="35100">3510 - DC Voltage Sensor 0-75V</option>
						<option value="35110">3511 - DC Current Sensor 0-10mA</option>
						<option value="35120">3512 - DC Current Sensor 0-100mA</option>
						<option value="35130">3513 - DC Current Sensor 0-1A</option>
						<option value="35140">3514 - AC Power Sensor 250V*30A (50Hz)</option>
						<option value="35150">3515 - AC Power Sensor 250V*30A (60Hz)</option>
						<option value="35160">3516 - AC Power Sensor 250V*5A (50Hz)</option>
						<option value="35170">3517 - AC Power Sensor 250V*5A (60Hz)</option>
						<option value="35180">3518 - AC Power Sensor 110V*5A (60Hz)</option>
						<option value="35190">3519 - AC Power Sensor 110V*15A (60Hz)</option>
						<option value="35840">3584 - 0-50A DC Current Transducer</option>
						<option value="35850">3585 - 0-100A DC Current Transducer</option>
						<option value="35860">3586 - 0-250A DC Current Transducer</option>
						<option value="35870">3587 - +-50A DC Current Transducer</option>
						<option value="35880">3588 - +-100A DC Current Transducer</option>
						<option value="35890">3589 - +-250A DC Current Transducer</option>
						<option value="110000">ADP1000 - ph Adapter</option>
						<option value="110001">ADP1000 - ORP Adapter</option>
					</select>
				</td>
			</tr>
			<tr>
				<td><input readonly type='text' id='$KEY_sensorValue' value="0"><label id='$KEY_unit' class='phidinfo'>V/V</label></td>
			</tr>
		</table>
	</fieldset>
	<fieldset class="errorField" id="$KEY_errorField">
		<legend><label class='phidinfo'>Errors</label></legend>
		<div id="$KEY_errScroll" class="errScroll">
			<table class="errorTable" id="$KEY_errorTable">
				<col width="80">
				<col width="80">
				<col width="160">
				<thead>
					<tr>
						<th align='left'><label>Time</label></th>
						<th align='center'><label>Error #</label></th>
						<th align='center'><label>Desc</label></th>
						<th><input type='submit' size='9' class='phidinfo' onclick='$KEY_errClear()' value='Clear'></th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</fieldset>
</body>
</html>
